\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{graphicx}
\usepackage[sort,compress]{cite}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{fancyvrb}
\usepackage{longtable}
\usepackage{array}
\usepackage{minted}
\usepackage{tempora}
\usepackage[hidelinks]{hyperref}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{caption}
\usepackage[none]{hyphenat}  % Полное отключение переносов
\usepackage{microtype} % Для улучшенной типографики

\sloppy

\DeclareCaptionFormat{listingformat}{#1#3} % Убираем двоеточие
\captionsetup[lstlisting]{
    font=small,
    labelsep=endash, % Заменяем двоеточие на тире
}

\AtBeginEnvironment{lstlisting}{\hyphenpenalty=50}  

\lstdefinestyle{myStyle}{
    backgroundcolor=\color{gray!5},    % светло-серый фон
    basicstyle=\ttfamily\small,        % моноширинный шрифт
    breaklines=true,                   % перенос строк
    numbers=left,                      % нумерация строк
    numberstyle=\tiny\color{gray},     % стиль номеров
    keywordstyle=\color{blue},         % ключевые слова
    commentstyle=\color{green!50!black}, % комментарии
    stringstyle=\color{red},           % строки
    showstringspaces=false,            % не показывать пробелы в строках
    tabsize=4,                         % размер табуляции
    language=C++,                      % язык для подсветки
    captionpos=false                   % подпись снизу
}

\lstset{
    breaklines=true,          % Разрешить перенос строк
    breakatwhitespace=true,   % Переносить только по пробелам
    prebreak={\mbox{\allowbreak}},  % Знак переноса (опционально)
    postbreak={\mbox{\allowbreak}}, % Знак переноса (опционально)
    keepspaces=true,          % Сохранять пробелы
    columns=fullflexible,      % Гибкое выравнивание
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue},
    stringstyle=\color{red},
    showstringspaces=false,
}